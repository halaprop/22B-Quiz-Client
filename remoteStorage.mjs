function a0_0x20d4(){const _0x263e17=['16357GOZQuW','toString','keysPaged','log','clear','startsWith','map','requestHeaders','/get','8HrIMuI','8297619jEkVaO','GET','some','86Mdgyuo','DELETE','removeItem','keys','getNamespace','getItem','application/json','POST','74058xBYCeV','namespace','33IgWQaa','all','\x20â†’\x20ERROR:\x20','endpoint','name','message','stringify','204633dvttQP','search','66212BVOqHk','list','getItemWithMetadata','3794750QfuiNd','length','push','fetch','/delete','85PuVuFe','4874898tPAcJS'];a0_0x20d4=function(){return _0x263e17;};return a0_0x20d4();}const a0_0x477f08=a0_0x38e6;(function(_0x1dc84d,_0x53ecaa){const _0x1600b0=a0_0x38e6,_0x2f4fd1=_0x1dc84d();while(!![]){try{const _0x3f8702=parseInt(_0x1600b0(0x1c7))/0x1*(parseInt(_0x1600b0(0x1d4))/0x2)+parseInt(_0x1600b0(0x1de))/0x3*(parseInt(_0x1600b0(0x1bd))/0x4)+-parseInt(_0x1600b0(0x1c5))/0x5*(-parseInt(_0x1600b0(0x1dc))/0x6)+parseInt(_0x1600b0(0x1c6))/0x7*(-parseInt(_0x1600b0(0x1d0))/0x8)+-parseInt(_0x1600b0(0x1bb))/0x9+-parseInt(_0x1600b0(0x1c0))/0xa+parseInt(_0x1600b0(0x1d1))/0xb;if(_0x3f8702===_0x53ecaa)break;else _0x2f4fd1['push'](_0x2f4fd1['shift']());}catch(_0x4fb74e){_0x2f4fd1['push'](_0x2f4fd1['shift']());}}}(a0_0x20d4,0xb7578));function a0_0x38e6(_0x9337f1,_0x55bc70){const _0x20d497=a0_0x20d4();return a0_0x38e6=function(_0x38e686,_0x36538a){_0x38e686=_0x38e686-0x1bb;let _0x1f6604=_0x20d497[_0x38e686];return _0x1f6604;},a0_0x38e6(_0x9337f1,_0x55bc70);}export class RemoteStorage{constructor(_0x364751,_0x5058cd){const _0xce2cb4=a0_0x38e6;this[_0xce2cb4(0x1dd)]=_0x364751,this['endpoint']='https://remote-storage.dan-5d7.workers.dev/v1',this[_0xce2cb4(0x1ce)]={'Authorization':_0x5058cd,'Content-Type':_0xce2cb4(0x1da)};}async['keys'](){const _0x351d25=a0_0x38e6;let _0xdcda0=[],_0x5a4480=null;while(!![]){const {keys:_0x23a500,cursor:_0x398047,list_complete:_0xe8c260}=await this[_0x351d25(0x1c9)]({'cursor':_0x5a4480});_0xdcda0[_0x351d25(0x1c2)](..._0x23a500);if(_0xe8c260)break;_0x5a4480=_0x398047;}return _0xdcda0;}async[a0_0x477f08(0x1c9)]({limit:limit=0x3e8,cursor:_0x34e592=null}={}){const _0x4cdf4d=a0_0x477f08,{items:_0x1ee7e5,cursor:_0x2b7a04,list_complete:_0x333a4c}=await this[_0x4cdf4d(0x1be)]({'limit':limit,'cursor':_0x34e592}),_0x740f50=_0x1ee7e5['map'](_0x49066b=>_0x49066b[_0x4cdf4d(0x1e2)]);return{'keys':_0x740f50,'cursor':_0x2b7a04,'list_complete':_0x333a4c};}async[a0_0x477f08(0x1d8)](..._0x3a56b7){const _0x531495=a0_0x477f08,_0x3d90fc={};let _0x2fcd5d=null;while(!![]){const {items:_0x2146f0,cursor:_0x23de83,list_complete:_0x234882}=await this[_0x531495(0x1be)]({'cursor':_0x2fcd5d}),_0x5bae4a=_0x3a56b7[_0x531495(0x1c1)]?_0x2146f0['filter'](_0xdfc19d=>_0x3a56b7[_0x531495(0x1d3)](_0x3d0657=>_0xdfc19d[_0x531495(0x1e2)][_0x531495(0x1cc)](_0x3d0657))):_0x2146f0,_0xb6ad07=_0x5bae4a['map'](async({name:_0x40c016,metadata:_0x47c9d1})=>{const _0x2c7a6d=_0x531495,_0x21e9e2=await this[_0x2c7a6d(0x1d9)](_0x40c016);_0x3d90fc[_0x40c016]={'value':_0x21e9e2,'metadata':_0x47c9d1};});await Promise[_0x531495(0x1df)](_0xb6ad07);if(_0x234882)break;_0x2fcd5d=_0x23de83;}return _0x3d90fc;}async[a0_0x477f08(0x1be)]({limit:limit=0x3e8,cursor:cursor=null}={}){return this['fetch']('GET','/list',null,{'limit':limit,'cursor':cursor});}async['setItem'](_0x361d30,_0x3a6e4b){const _0x36ade9=a0_0x477f08;return this['fetch'](_0x36ade9(0x1db),'/set',{'key':_0x361d30,'value':_0x3a6e4b});}async[a0_0x477f08(0x1d9)](_0x5c9477){const _0x16320d=a0_0x477f08;return this[_0x16320d(0x1c3)](_0x16320d(0x1d2),_0x16320d(0x1cf),null,{'key':_0x5c9477});}async[a0_0x477f08(0x1bf)](_0x72431b){const _0x431511=a0_0x477f08;return this[_0x431511(0x1c3)]('GET','/getWithMetadata',null,{'key':_0x72431b});}async['removeItem'](_0x304e04){const _0x56422e=a0_0x477f08;return this[_0x56422e(0x1c3)](_0x56422e(0x1d5),_0x56422e(0x1c4),null,{'key':_0x304e04});}async[a0_0x477f08(0x1cb)](){const _0x5424df=a0_0x477f08,_0x1b2b83=await this[_0x5424df(0x1d7)](),_0x1a55fc=_0x1b2b83[_0x5424df(0x1cd)](_0xa80fbe=>this[_0x5424df(0x1d6)](_0xa80fbe));return await Promise[_0x5424df(0x1df)](_0x1a55fc),null;}async[a0_0x477f08(0x1c3)](_0x41bc46,_0x40185c,_0x3ff671=null,_0x4f676f={}){const _0x331b3f=a0_0x477f08;_0x4f676f={..._0x4f676f,'namespace':this['namespace']};let _0x250ad0=new URL(''+this[_0x331b3f(0x1e1)]+_0x40185c);const _0x462824=new URLSearchParams();for(const [_0x50cf90,_0xdc54cb]of Object['entries'](_0x4f676f)){_0xdc54cb!==undefined&&_0xdc54cb!==null&&_0x462824['append'](_0x50cf90,_0xdc54cb);}_0x250ad0[_0x331b3f(0x1bc)]=_0x462824[_0x331b3f(0x1c8)]();const _0x54ddba={'method':_0x41bc46,'headers':this[_0x331b3f(0x1ce)]};if(_0x3ff671)_0x54ddba['body']=JSON[_0x331b3f(0x1e4)](_0x3ff671);try{const _0x3e5fc8=await fetch(_0x250ad0,_0x54ddba),_0x5796ba=await _0x3e5fc8['json']();if(!_0x3e5fc8['ok'])throw{'error':_0x5796ba};return _0x5796ba;}catch(_0x4ae0d1){console[_0x331b3f(0x1ca)](_0x41bc46+'\x20'+_0x250ad0+_0x331b3f(0x1e0)+_0x4ae0d1[_0x331b3f(0x1e3)]);throw _0x4ae0d1;}}}