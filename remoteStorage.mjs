const a0_0x1d114d=a0_0x2ea4;(function(_0x4d0489,_0x5f05c){const _0x56d959=a0_0x2ea4,_0x587906=_0x4d0489();while(!![]){try{const _0x3326fb=parseInt(_0x56d959(0x17f))/0x1+-parseInt(_0x56d959(0x17e))/0x2*(parseInt(_0x56d959(0x179))/0x3)+parseInt(_0x56d959(0x172))/0x4+parseInt(_0x56d959(0x187))/0x5*(parseInt(_0x56d959(0x16f))/0x6)+-parseInt(_0x56d959(0x182))/0x7*(parseInt(_0x56d959(0x180))/0x8)+parseInt(_0x56d959(0x176))/0x9+parseInt(_0x56d959(0x18d))/0xa;if(_0x3326fb===_0x5f05c)break;else _0x587906['push'](_0x587906['shift']());}catch(_0x38b3e5){_0x587906['push'](_0x587906['shift']());}}}(a0_0x3c9e,0x5a55d));function a0_0x2ea4(_0x33cae5,_0x47de7f){const _0x3c9e89=a0_0x3c9e();return a0_0x2ea4=function(_0x2ea4f1,_0x2d1ce4){_0x2ea4f1=_0x2ea4f1-0x16c;let _0x1b2690=_0x3c9e89[_0x2ea4f1];return _0x1b2690;},a0_0x2ea4(_0x33cae5,_0x47de7f);}function a0_0x3c9e(){const _0x421d56=['startsWith','/get','requestHeaders','getNamespace','6jHSUyt','some','\x20â†’\x20ERROR:\x20','1249068dSICOB','all','application/json','name','4880997ndkMZm','/list','log','6LrBRqz','append','getItem','GET','filter','705092ILmTwA','495943AnYSVL','16KwkdON','list','2030273zuYySh','namespace','keysPaged','toString','clear','1375195fSSidI','message','getItemWithMetadata','DELETE','removeItem','fetch','296010EeMlOv','search','keys','endpoint','map'];a0_0x3c9e=function(){return _0x421d56;};return a0_0x3c9e();}export class RemoteStorage{constructor(_0x1e6738,_0x34d700){const _0x9af0f9=a0_0x2ea4;this[_0x9af0f9(0x183)]=_0x1e6738,this['endpoint']='https://remote-storage.dan-5d7.workers.dev/v1',this[_0x9af0f9(0x16d)]={'Authorization':_0x34d700,'Content-Type':_0x9af0f9(0x174)};}async[a0_0x1d114d(0x18f)](){const _0x2afe21=a0_0x1d114d;let _0x43e4bb=[],_0x17fbe1=null;while(!![]){const {keys:_0x1efdc6,cursor:_0x4b94eb,list_complete:_0x4b7455}=await this[_0x2afe21(0x184)]({'cursor':_0x17fbe1});_0x43e4bb['push'](..._0x1efdc6);if(_0x4b7455)break;_0x17fbe1=_0x4b94eb;}return _0x43e4bb;}async[a0_0x1d114d(0x184)]({limit:limit=0x3e8,cursor:_0x2e7a41=null}={}){const _0x3442b0=a0_0x1d114d,{items:_0x5d8297,cursor:_0x34943b,list_complete:_0x24f240}=await this[_0x3442b0(0x181)]({'limit':limit,'cursor':_0x2e7a41}),_0x369749=_0x5d8297[_0x3442b0(0x191)](_0x2f0e93=>_0x2f0e93[_0x3442b0(0x175)]);return{'keys':_0x369749,'cursor':_0x34943b,'list_complete':_0x24f240};}async[a0_0x1d114d(0x16e)](..._0x370912){const _0x18180f=a0_0x1d114d,_0x44deb2={};let _0x179057=null;while(!![]){const {items:_0x13437a,cursor:_0x321e71,list_complete:_0x2e80a0}=await this[_0x18180f(0x181)]({'cursor':_0x179057}),_0x37a94d=_0x370912['length']?_0x13437a[_0x18180f(0x17d)](_0x28cab7=>_0x370912[_0x18180f(0x170)](_0x1a5618=>_0x28cab7[_0x18180f(0x175)][_0x18180f(0x192)](_0x1a5618))):_0x13437a,_0x5f4d12=_0x37a94d['map'](async({name:_0x2dbfe8,metadata:_0xc86665})=>{const _0x44ad81=await this['getItem'](_0x2dbfe8);_0x44deb2[_0x2dbfe8]={'value':_0x44ad81,'metadata':_0xc86665};});await Promise[_0x18180f(0x173)](_0x5f4d12);if(_0x2e80a0)break;_0x179057=_0x321e71;}return _0x44deb2;}async['list']({limit:limit=0x3e8,cursor:cursor=null}={}){const _0x2da42f=a0_0x1d114d;return this[_0x2da42f(0x18c)](_0x2da42f(0x17c),_0x2da42f(0x177),null,{'limit':limit,'cursor':cursor});}async['setItem'](_0x4a4ecd,_0x2aafa2){const _0x2993a6=a0_0x1d114d;return this[_0x2993a6(0x18c)]('POST','/set',{'key':_0x4a4ecd,'value':_0x2aafa2});}async[a0_0x1d114d(0x17b)](_0x1afd9d){const _0x8c0da1=a0_0x1d114d;return this['fetch']('GET',_0x8c0da1(0x16c),null,{'key':_0x1afd9d});}async[a0_0x1d114d(0x189)](_0x52e020){const _0x9253b4=a0_0x1d114d;return this['fetch'](_0x9253b4(0x17c),'/getWithMetadata',null,{'key':_0x52e020});}async[a0_0x1d114d(0x18b)](_0x2814c4){const _0x334b45=a0_0x1d114d;return this[_0x334b45(0x18c)](_0x334b45(0x18a),'/delete',null,{'key':_0x2814c4});}async[a0_0x1d114d(0x186)](){const _0x11b130=a0_0x1d114d,_0x31acf8=await this['keys'](),_0x5d6462=_0x31acf8[_0x11b130(0x191)](_0x4e00aa=>this[_0x11b130(0x18b)](_0x4e00aa));return await Promise[_0x11b130(0x173)](_0x5d6462),null;}async[a0_0x1d114d(0x18c)](_0x36a873,_0x282259,_0x1584ce=null,_0x484d8b={}){const _0x22f3e7=a0_0x1d114d;_0x484d8b={..._0x484d8b,'namespace':this[_0x22f3e7(0x183)]};let _0x19889f=new URL(''+this[_0x22f3e7(0x190)]+_0x282259);const _0x1a657c=new URLSearchParams();for(const [_0x542e83,_0x49c225]of Object['entries'](_0x484d8b)){_0x49c225!==undefined&&_0x49c225!==null&&_0x1a657c[_0x22f3e7(0x17a)](_0x542e83,_0x49c225);}_0x19889f[_0x22f3e7(0x18e)]=_0x1a657c[_0x22f3e7(0x185)]();const _0x4e5068={'method':_0x36a873,'headers':this[_0x22f3e7(0x16d)]};if(_0x1584ce)_0x4e5068['body']=JSON['stringify'](_0x1584ce);try{const _0x1e819d=await fetch(_0x19889f,_0x4e5068),_0x4f7e9e=await _0x1e819d['json']();if(!_0x1e819d['ok'])throw{'error':_0x4f7e9e};return _0x4f7e9e;}catch(_0x816499){console[_0x22f3e7(0x178)](_0x36a873+'\x20'+_0x19889f+_0x22f3e7(0x171)+_0x816499[_0x22f3e7(0x188)]);throw _0x816499;}}}